# ğŸ”¥ Firebase å®Œæ•´é…ç½®æŒ‡å—

## ğŸ“‹ **é…ç½®æ¸…å•**

### âœ… **ç¬¬ä¸€æ­¥ï¼šFirebaseé¡¹ç›®è®¾ç½®**

1. è®¿é—® [Firebaseæ§åˆ¶å°](https://console.firebase.google.com/)
2. é€‰æ‹©é¡¹ç›® `newtravelchina-36648`

### âœ… **ç¬¬äºŒæ­¥ï¼šé…ç½®Firestoreè§„åˆ™**

**å¯¼èˆª**: Firestore Database â†’ è§„åˆ™

å¤åˆ¶ä»¥ä¸‹è§„åˆ™å¹¶ç‚¹å‡»"å‘å¸ƒ"ï¼š

```javascript
rules_version = '2';

// Firestoreè§„åˆ™
service cloud.firestore {
  match /databases/{database}/documents {
    // å…¬å…±æ–‡ç«  - æ‰€æœ‰äººå¯è¯»ï¼Œä»…ç®¡ç†å‘˜å¯å†™
    match /articles/{articleId} {
      allow read: if true;
      allow write: if request.auth != null && request.auth.token.admin == true;
      
      // æ–‡ç« æµè§ˆè®°å½• - æ‰€æœ‰äººå¯è¯»å†™
      match /views/{viewId} {
        allow read, write: if true;
      }
    }
    
    // æ–‡ç« æµè§ˆè®°å½• - æ‰€æœ‰äººå¯è¯»ï¼Œå·²è®¤è¯ç”¨æˆ·å¯å†™
    match /article_views/{viewId} {
      allow read: if true;
      allow write: if request.auth != null;
    }
    
    // ç”¨æˆ·èµ„æ–™ - ä»…è‡ªå·±å¯è¯»å†™
    match /users/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    
    // è¯„è®º - æ‰€æœ‰äººå¯è¯»ï¼Œå·²è®¤è¯ç”¨æˆ·å¯å†™å’Œæ›´æ–°ï¼Œåˆ›å»ºè€…å¯åˆ é™¤
    match /comments/{commentId} {
      allow read: if true;
      allow create: if request.auth != null;
      allow update: if request.auth != null;
      allow delete: if request.auth != null && 
                     (request.auth.uid == resource.data.userId || 
                      request.auth.token.admin == true);
    }
  }
}
```

### âœ… **ç¬¬ä¸‰æ­¥ï¼šé…ç½®Storageè§„åˆ™**

**å¯¼èˆª**: Storage â†’ è§„åˆ™

å¤åˆ¶ä»¥ä¸‹è§„åˆ™å¹¶ç‚¹å‡»"å‘å¸ƒ"ï¼š

```javascript
rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    // å›¾ç‰‡å’Œæ–‡æ¡£ä¸Šä¼  - å·²è®¤è¯ç”¨æˆ·å¯ä¸Šä¼ å’Œè¯»å–
    match /{allPaths=**} {
      allow read: if true; // æ‰€æœ‰äººå¯è¯»å–æ–‡ä»¶
      allow write: if request.auth != null; // å·²è®¤è¯ç”¨æˆ·å¯ä¸Šä¼ 
    }
  }
}
```

### âœ… **ç¬¬å››æ­¥ï¼šè®¾ç½®ç®¡ç†å‘˜è´¦æˆ·**

#### **æ–¹æ³•1ï¼šä½¿ç”¨å®‰å…¨åˆå§‹åŒ–é¡µé¢ (æ¨è)**

1. è®¿é—®: `http://localhost:5178/direct-admin-init`
2. è¾“å…¥ç®¡ç†å‘˜é‚®ç®± (å»ºè®®ä½¿ç”¨æ‚¨çš„å·¥ä½œé‚®ç®±)
3. è®¾ç½®å¼ºå¯†ç ï¼Œå¿…é¡»åŒ…å«ï¼š
   - è‡³å°‘8ä½å­—ç¬¦
   - å¤§å°å†™å­—æ¯
   - æ•°å­—
   - ç‰¹æ®Šå­—ç¬¦ (@$!%*?&)

**æ¨èå¯†ç ç¤ºä¾‹**:
- `MySecure123!`
- `TravelChina2024@`
- `Admin$2024Pass`

#### **æ–¹æ³•2ï¼šé€šè¿‡Firebaseæ§åˆ¶å°æ‰‹åŠ¨è®¾ç½®**

1. **Authentication** â†’ **ç”¨æˆ·** â†’ **æ·»åŠ ç”¨æˆ·**
2. æ·»åŠ ç®¡ç†å‘˜é‚®ç®±å’Œå¯†ç 
3. å¤åˆ¶ç”¨æˆ·UID
4. **Firestore Database** â†’ **æ•°æ®** â†’ åˆ›å»ºé›†åˆ `users`
5. åˆ›å»ºæ–‡æ¡£ï¼Œæ–‡æ¡£IDä¸ºç”¨æˆ·UIDï¼Œå†…å®¹ï¼š
```json
{
  "email": "your-admin@email.com",
  "displayName": "System Administrator", 
  "isAdmin": true,
  "createdAt": "2024-06-22T10:00:00.000Z"
}
```

## ğŸ§ª **æµ‹è¯•æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½**

### **1. æµ‹è¯•é¡µé¢**
è®¿é—®: `http://localhost:5178/file-upload-test`

è¿™ä¸ªé¡µé¢æä¾›4ç§ä¸Šä¼ å™¨æµ‹è¯•ï¼š
- ğŸš€ æ–°ç‰ˆé€šç”¨æ–‡ä»¶ä¸Šä¼ å™¨ (æ¨è)
- ğŸ–¼ï¸ ä»…å›¾ç‰‡ä¸Šä¼ å™¨
- ğŸ“„ ä»…æ–‡æ¡£ä¸Šä¼ å™¨
- ğŸ”„ æ—§ç‰ˆå›¾ç‰‡ä¸Šä¼ å™¨ (å¯¹æ¯”)

### **2. ç®¡ç†å‘˜åå°æµ‹è¯•**
1. ä½¿ç”¨ç®¡ç†å‘˜è´¦æˆ·ç™»å½•
2. è®¿é—®: `http://localhost:5178/admin`
3. æµ‹è¯•æ–‡ç« å‘å¸ƒåŠŸèƒ½ï¼š
   - ä¸Šä¼ å°é¢å›¾ç‰‡
   - ä¸Šä¼ å†…å®¹æ–‡ä»¶ (å›¾ç‰‡+Wordæ–‡æ¡£)
   - å‘å¸ƒæ–‡ç« 

### **3. æ”¯æŒçš„æ–‡ä»¶ç±»å‹**

#### **å›¾ç‰‡æ–‡ä»¶**:
- JPG, JPEG
- PNG
- GIF
- WebP
- SVG

#### **æ–‡æ¡£æ–‡ä»¶**:
- Word (.docx, .doc)
- PDF
- çº¯æ–‡æœ¬ (.txt)
- HTML
- RTF

**æ–‡ä»¶å¤§å°é™åˆ¶**: æœ€å¤§10MB

## ğŸ”§ **åŠŸèƒ½ç‰¹æ€§**

### **å›¾ç‰‡ä¸Šä¼ **
- âœ… è‡ªåŠ¨æ’å…¥HTML `<img>` æ ‡ç­¾
- âœ… å“åº”å¼å›¾ç‰‡æ ·å¼
- âœ… ä¼˜åŒ–çš„æ˜¾ç¤ºæ•ˆæœ

### **Wordæ–‡æ¡£ä¸Šä¼ **
- âœ… è‡ªåŠ¨ç”Ÿæˆä¸‹è½½é“¾æ¥
- âœ… Google Docsé¢„è§ˆæ”¯æŒ
- âœ… ä¿æŒåŸæ–‡æ¡£æ ¼å¼
- âœ… å†…åµŒiframeæ˜¾ç¤º

### **ç”¨æˆ·ä½“éªŒ**
- âœ… æ‹–æ‹½ä¸Šä¼ æ”¯æŒ
- âœ… å®æ—¶è¿›åº¦æ˜¾ç¤º
- âœ… è¯¦ç»†é”™è¯¯æç¤º
- âœ… æ–‡ä»¶é¢„è§ˆåŠŸèƒ½
- âœ… URLå¤åˆ¶åŠŸèƒ½

## ğŸ” **æ•…éšœæ’é™¤**

### **å¸¸è§é—®é¢˜**

#### **å›¾ç‰‡ä¸Šä¼ ä¸€ç›´è½¬åœˆ**
1. æ£€æŸ¥Storageè§„åˆ™æ˜¯å¦æ­£ç¡®éƒ¨ç½²
2. ç¡®è®¤ç”¨æˆ·å·²ç™»å½•
3. æ£€æŸ¥ç½‘ç»œè¿æ¥
4. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯

#### **æ–‡æ¡£é¢„è§ˆå¤±è´¥**
1. ç¡®è®¤æ–‡æ¡£æ ¼å¼å—æ”¯æŒ
2. æ£€æŸ¥æ–‡ä»¶å¤§å°æ˜¯å¦è¶…é™
3. éªŒè¯æ–‡æ¡£URLæ˜¯å¦å¯è®¿é—®

#### **æƒé™é”™è¯¯**
1. ç¡®è®¤Firestoreè§„åˆ™å·²éƒ¨ç½²
2. æ£€æŸ¥ç”¨æˆ·ç™»å½•çŠ¶æ€
3. éªŒè¯ç®¡ç†å‘˜æƒé™è®¾ç½®

### **è°ƒè¯•æ­¥éª¤**
1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…· (F12)
2. æŸ¥çœ‹Consoleæ ‡ç­¾é¡µçš„é”™è¯¯ä¿¡æ¯
3. æ£€æŸ¥Networkæ ‡ç­¾é¡µçš„è¯·æ±‚çŠ¶æ€
4. éªŒè¯Firebaseé…ç½®

## ğŸ“ **æŠ€æœ¯æ”¯æŒ**

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
- Firebaseæ§åˆ¶å°çš„é”™è¯¯æ—¥å¿—
- æµè§ˆå™¨å¼€å‘è€…å·¥å…·çš„æ§åˆ¶å°
- ç½‘ç»œè¿æ¥çŠ¶æ€
- æ–‡ä»¶æ ¼å¼å’Œå¤§å°

## ğŸ¯ **ä¸‹ä¸€æ­¥è®¡åˆ’**

1. **å¢å¼ºå¯Œæ–‡æœ¬ç¼–è¾‘å™¨** - é›†æˆCKEditoræˆ–TinyMCE
2. **æ–‡æ¡£æ ¼å¼è½¬æ¢** - ä½¿ç”¨mammoth.jsè½¬æ¢Wordä¸ºHTML
3. **å›¾ç‰‡å‹ç¼©** - è‡ªåŠ¨ä¼˜åŒ–ä¸Šä¼ å›¾ç‰‡å¤§å°
4. **æ‰¹é‡ä¸Šä¼ ** - æ”¯æŒå¤šæ–‡ä»¶åŒæ—¶ä¸Šä¼ 
5. **æ–‡ä»¶ç®¡ç†** - æ·»åŠ æ–‡ä»¶åˆ é™¤å’Œç®¡ç†åŠŸèƒ½ 